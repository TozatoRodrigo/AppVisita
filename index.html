<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4285f4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>AppVisita - Controle de Visitas M√©dicas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="estilos-admin.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè•</text></svg>">
    <!-- Font Awesome para √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <!-- Firebase SDKs - sem defer para garantir carregamento s√≠ncrono -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>
    
    <!-- Script de configura√ß√£o e inicializa√ß√£o do Firebase (PRIMEIRO) -->
    <script src="script-otimizado.js"></script>
    
    <!-- Verificador de inicializa√ß√£o do Firebase -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Verificador do DOM carregado, verificando inicializa√ß√£o do Firebase...");
            
            // Verificar se a fun√ß√£o de verifica√ß√£o existe
            if (typeof window.verificarFirebaseDisponivel !== 'function') {
                console.error("Fun√ß√£o de verifica√ß√£o do Firebase n√£o encontrada!");
                const errorMsg = document.createElement('div');
                errorMsg.style.cssText = 'position:fixed;top:0;left:0;width:100%;padding:10px;background:#f44336;color:white;text-align:center;z-index:9999;';
                errorMsg.textContent = 'Erro cr√≠tico: Fun√ß√£o de verifica√ß√£o do Firebase n√£o encontrada. Por favor, recarregue a p√°gina.';
                document.body.appendChild(errorMsg);
                return;
            }
            
            // Verificar se o Firebase est√° inicializado
            if (!window.verificarFirebaseDisponivel()) {
                console.log("Firebase ainda n√£o est√° dispon√≠vel, aguardando evento firebase-ready...");
                
                // Configurar listener para evento de inicializa√ß√£o
                document.addEventListener('firebase-ready', function(event) {
                    console.log("Firebase inicializado com sucesso via evento.", event?.detail);
                });
                
                // Verifica√ß√£o de timeout como fallback
                setTimeout(function() {
                    if (!window.verificarFirebaseDisponivel()) {
                        console.error("Timeout de inicializa√ß√£o do Firebase atingido!");
                        const errorMsg = document.createElement('div');
                        errorMsg.style.cssText = 'position:fixed;top:0;left:0;width:100%;padding:10px;background:#f44336;color:white;text-align:center;z-index:9999;';
                        errorMsg.textContent = 'Erro cr√≠tico: Firebase n√£o foi inicializado ap√≥s 10 segundos. Por favor, recarregue a p√°gina.';
                        document.body.appendChild(errorMsg);
                    }
                }, 10000);
            } else {
                console.log("Firebase j√° est√° inicializado e dispon√≠vel");
            }
        });
    </script>
    
    <!-- Scripts da aplica√ß√£o em ordem de depend√™ncia -->
    <script src="app-modulos.js"></script>
    <script src="app-ui.js"></script>
</head>
<body>
    <!-- Verifica√ß√£o de estados inconsistentes da UI -->
    <script>
      (function() {
        // Verificar se a p√°gina foi carregada adequadamente
        window.addEventListener('load', function() {
          console.log('Verificando estado da aplica√ß√£o...');
          
          // Definir um timeout para verificar se a UI foi carregada
          setTimeout(function() {
            const areaLogin = document.getElementById('area-login');
            const appContainer = document.getElementById('app-container');
            const loading = document.getElementById('loading-overlay');
            
            // Verificar se os elementos principais est√£o vis√≠veis
            if (areaLogin && appContainer) {
              // Verificar um estado inconsistente - ambos escondidos ou ambos vis√≠veis
              const areaLoginVisible = areaLogin.style.display !== 'none';
              const appContainerVisible = appContainer.style.display !== 'none';
              
              if ((!areaLoginVisible && !appContainerVisible) || (areaLoginVisible && appContainerVisible)) {
                console.warn('Estado inconsistente detectado - corrigindo...');
                
                // Se o Firebase n√£o foi inicializado em 5 segundos, provavelmente h√° um problema
                if (!window.firebase || !window.firebase.auth) {
                  console.error('Firebase n√£o inicializado corretamente - recarregando a p√°gina...');
                  location.reload();
                  return;
                }
                
                // Se n√£o temos usu√°rio autenticado, mostrar login
                const currentUser = window.firebase.auth().currentUser;
                if (!currentUser) {
                  console.log('Usu√°rio n√£o autenticado - redirecionando para login');
                  areaLogin.style.display = 'flex';
                  appContainer.style.display = 'none';
                } else {
                  console.log('Usu√°rio autenticado - redirecionando para dashboard');
                  areaLogin.style.display = 'none';
                  appContainer.style.display = 'block';
                }
              }
              
              // Garantir que o loading n√£o fique vis√≠vel para sempre
              if (loading && loading.style.display !== 'none') {
                console.warn('Loading vis√≠vel por muito tempo - escondendo...');
                loading.style.display = 'none';
              }
            } else {
              console.error('Elementos essenciais da UI n√£o encontrados!');
            }
          }, 5000); // 5 segundos para carregar
        });
      })();
    </script>
    
    <!-- Container de loading -->
    <div id="loading-overlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <div id="loading-message" class="loading-message">Carregando...</div>
    </div>

    <section id="area-login" class="login-container">
        <img src="https://cdn-icons-png.flaticon.com/512/4253/4253264.png" alt="AppVisita Logo" class="logo">
        <h2>AppVisita</h2>
        <form id="form-login">
            <div>
                <label for="login-email">Email:</label>
                <input type="email" id="login-email" placeholder="Seu email m√©dico" required>
            </div>
            <div>
                <label for="login-senha">Senha:</label>
                <input type="password" id="login-senha" placeholder="Sua senha" required>
            </div>
            <button type="submit" class="btn-primary">Entrar</button>
            <p id="login-error-message" class="error-message"></p>
        </form>
        <p>N√£o tem conta? <button id="btn-criar-conta" class="link-button">Crie uma aqui</button></p>
        <p id="auth-message"></p>
    </section>

    <div id="app-container" style="display: none;">
        <!-- Sidebar / Menu lateral -->
        <div id="sidebar">
            <div class="sidebar-header">
                <h3>AppVisita</h3>
                <button id="close-sidebar" class="btn-icon"><i class="fas fa-times"></i></button>
            </div>
            <nav id="menu-principal">
                <ul>
                    <li><button id="btn-dashboard" class="menu-btn menu-btn-active"><i class="fas fa-home"></i> Dashboard</button></li>
                    <li><button id="btn-adicionar-novo" class="menu-btn"><i class="fas fa-user-plus"></i> Adicionar Paciente</button></li>
                    <li><button id="btn-consultar" class="menu-btn"><i class="fas fa-search"></i> Consultar Paciente</button></li>
                    <li><button id="btn-logout" class="menu-btn-logout"><i class="fas fa-sign-out-alt"></i> Sair</button></li>
                </ul>
            </nav>
        </div>
        
        <!-- Overlay para quando o menu estiver aberto -->
        <div id="sidebar-overlay"></div>

        <header>
            <button id="menu-toggle" class="btn-icon"><i class="fas fa-bars"></i></button>
            <h1>AppVisita</h1>
        </header>
        
        <main>
            <!-- Dashboard (vis√≠vel por padr√£o) -->
            <section id="dashboard-section" class="app-section active-section">
                <h2><i class="fas fa-clipboard-list"></i> Visitas Pendentes</h2>
                <div id="filtros-pendencias">
                    <label for="ordenar-por">Ordenar por:</label>
                    <select id="ordenar-por">
                        <option value="adicao">Ordem de Adi√ß√£o</option>
                        <option value="nome">Nome (A-Z)</option>
                    </select>
                </div>
                <ul id="lista-pacientes-pendentes">
                    <!-- Pacientes ser√£o adicionados aqui -->
                </ul>
            </section>
            
            <!-- Adicionar Paciente (oculto inicialmente) -->
            <section id="adicionar-paciente-section" class="app-section">
                <h2><i class="fas fa-user-plus"></i> Adicionar Novo Paciente</h2>
                <form id="form-adicionar-paciente">
                    <div class="form-group">
                        <label for="nome-paciente">Nome do Paciente: <span class="campo-obrigatorio">*</span></label>
                        <input type="text" id="nome-paciente" required placeholder="Nome completo do paciente">
                    </div>
                    <div class="form-group">
                        <label for="data-nascimento-paciente">Data de Nascimento: <span class="campo-obrigatorio">*</span></label>
                        <input type="date" id="data-nascimento-paciente" required>
                    </div>
                    <div class="form-group">
                        <label for="id-internacao-paciente">ID da Interna√ß√£o: <span class="campo-obrigatorio">*</span></label>
                        <input type="text" id="id-internacao-paciente" required placeholder="N√∫mero ou ID da interna√ß√£o">
                    </div>
                    <div class="form-group">
                        <label for="local-paciente">Local/Leito: <span class="campo-obrigatorio">*</span></label>
                        <input type="text" id="local-paciente" required placeholder="Enfermaria, quarto ou leito">
                    </div>
                    <div class="form-group" id="equipe-container">
                        <label for="equipe-paciente">Equipe M√©dica: <span class="campo-obrigatorio">*</span></label>
                        <select id="equipe-paciente" name="equipe-paciente" required>
                            <option value="">Selecione uma equipe</option>
                            <!-- Ser√° preenchido via JavaScript -->
                        </select>
                        <small>Selecione a equipe m√©dica respons√°vel por este paciente.</small>
                    </div>
                    <div id="pacientes-sugeridos" class="pacientes-sugeridos"></div>
                    <div id="msg-paciente-existente" class="alert alert-warning hidden">
                        <i class="fas fa-exclamation-triangle"></i> Aten√ß√£o: Este paciente j√° foi cadastrado anteriormente.
                    </div>
                    <div class="form-actions">
                        <button type="submit" id="btn-adicionar-paciente" class="btn-primary">
                            <i class="fas fa-plus-circle"></i> Adicionar Paciente
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- Consultar Paciente (oculto inicialmente) -->
            <section id="consultar-paciente-section" class="app-section">
                <h2><i class="fas fa-search"></i> Consultar Paciente</h2>
                <div class="consulta-container">
                    <div class="consulta-form">
                        <div class="input-group">
                            <label for="consulta-termo">Buscar por Nome ou ID de Interna√ß√£o:</label>
                            <div class="search-wrapper">
                                <input type="text" id="consulta-termo" placeholder="Digite nome ou ID de interna√ß√£o..." required>
                                <button type="button" id="btn-buscar-paciente"><i class="fas fa-search"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="resultado-consulta" class="resultado-consulta">
                        <div class="sem-resultados">
                            <p>Digite um nome ou ID de interna√ß√£o para realizar a consulta.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Se√ß√£o de Administra√ß√£o (vis√≠vel apenas para administradores) -->
            <section id="admin-section" class="app-section">
                <h2><i class="fas fa-tools"></i> Administra√ß√£o do Sistema</h2>
                
                <div class="admin-tabs">
                    <button id="tab-usuarios" class="admin-tab active">Usu√°rios</button>
                    <button id="tab-equipes" class="admin-tab">Equipes</button>
                    <button id="tab-estatisticas" class="admin-tab">Estat√≠sticas</button>
                </div>
                
                <div id="admin-usuarios-container" class="admin-tab-content active">
                    <div class="admin-card">
                        <h3>Usu√°rios Pendentes de Aprova√ß√£o</h3>
                        <div id="lista-usuarios-pendentes" class="admin-list">
                            <p class="carregando-info">Carregando usu√°rios pendentes...</p>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3>Todos os Usu√°rios</h3>
                        <div id="lista-todos-usuarios" class="admin-list">
                            <p class="carregando-info">Carregando todos os usu√°rios...</p>
                        </div>
                    </div>
                </div>
                
                <div id="admin-equipes-container" class="admin-tab-content">
                    <div class="admin-actions">
                        <button id="btn-nova-equipe" class="btn-primary">
                            <i class="fas fa-plus-circle"></i> Nova Equipe
                        </button>
                    </div>
                    
                    <div class="admin-card">
                        <h3>Equipes Cadastradas</h3>
                        <div id="lista-equipes" class="admin-list">
                            <p class="carregando-info">Carregando equipes...</p>
                        </div>
                    </div>
                </div>
                
                <div id="admin-estatisticas-container" class="admin-tab-content">
                    <div class="admin-stats-grid">
                        <div class="admin-stat-card">
                            <h3>Total de Pacientes</h3>
                            <div class="stat-number" id="total-pacientes">-</div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <h3>M√©dicos Ativos</h3>
                            <div class="stat-number" id="total-medicos">-</div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <h3>Equipes</h3>
                            <div class="stat-number" id="total-equipes">-</div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <h3>Evolu√ß√µes/M√™s</h3>
                            <div class="stat-number" id="total-evolucoes">-</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2024 AppVisita | Sistema de Controle de Visitas M√©dicas</p>
        </footer>
    </div> <!-- Fim do app-container -->

    <!-- Modal para Registrar Evolu√ß√£o -->
    <div id="modal-evolucao" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="modal-titulo-paciente">Registrar Evolu√ß√£o para Paciente</h3>
            <form id="form-evolucao">
                <div>
                    <label for="texto-evolucao">Evolu√ß√£o do Paciente:</label>
                    <textarea id="texto-evolucao" rows="6" placeholder="Descreva o estado atual do paciente, exames realizados e conduta..." required></textarea>
                </div>
                
                <!-- Nova se√ß√£o para anexar imagens -->
                <div class="upload-imagens-section">
                    <label>üì∏ Anexar Imagens (Exames, Resultados, etc.):</label>
                    <div class="upload-area" id="upload-area">
                        <div class="upload-placeholder">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Clique para selecionar imagens ou arraste aqui</p>
                            <small>JPEG, PNG, WebP ‚Ä¢ M√°x. 5MB por imagem ‚Ä¢ At√© 10 imagens</small>
                        </div>
                        <input type="file" id="input-imagens" multiple accept="image/jpeg,image/png,image/webp" style="display: none;">
                    </div>
                    
                    <!-- √Årea de progresso do upload -->
                    <div id="progress-container" class="progress-container" style="display: none;">
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                        <span id="progress-text">0%</span>
                    </div>
                    
                    <!-- Preview das imagens selecionadas -->
                    <div id="preview-imagens" class="preview-imagens"></div>
                </div>
                
                <div>
                    <label>Status P√≥s-Visita:</label>
                    <div>
                        <input type="radio" id="status-internado" name="status-paciente" value="internado" checked>
                        <label for="status-internado">Continua Internado</label>
                    </div>
                    <div>
                        <input type="radio" id="status-alta" name="status-paciente" value="alta">
                        <label for="status-alta">Alta Hospitalar</label>
                    </div>
                    <div>
                        <input type="radio" id="status-obito" name="status-paciente" value="obito">
                        <label for="status-obito">√ìbito</label>
                    </div>
                </div>
                <input type="hidden" id="paciente-id-evolucao">
                <button type="submit" class="btn-primary">Salvar Evolu√ß√£o</button>
            </form>
            <div class="historico-evolucoes-container">
                <h4>Hist√≥rico de Evolu√ß√µes</h4>
                <div id="historico-evolucoes-modal">
                <!-- Evolu√ß√µes anteriores ser√£o carregadas aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para visualiza√ß√£o de imagem ampliada -->
    <div id="modal-imagem" class="modal modal-imagem">
        <div class="modal-content-imagem">
            <span class="close-button">&times;</span>
            <div class="imagem-container">
                <img id="imagem-ampliada" src="" alt="Imagem ampliada">
                <div class="navegacao-imagens">
                    <button id="btn-anterior" class="nav-btn"><i class="fas fa-chevron-left"></i></button>
                    <button id="btn-proximo" class="nav-btn"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            <div class="imagem-info">
                <span id="contador-imagens">1 / 1</span>
            </div>
        </div>
    </div>

    <!-- Modal para Criar/Editar Equipe -->
    <div id="modal-equipe" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-titulo-equipe">Nova Equipe</h2>
            <form id="form-equipe">
                <div class="form-group">
                    <label for="nome-equipe">Nome da Equipe:</label>
                    <input type="text" id="nome-equipe" required placeholder="Ex: Cardiologia Hospital A">
                </div>
                <div class="form-group">
                    <label for="descricao-equipe">Descri√ß√£o:</label>
                    <textarea id="descricao-equipe" placeholder="Breve descri√ß√£o da equipe"></textarea>
                </div>
                <input type="hidden" id="equipe-id" value="">
                <div class="form-group">
                    <label>M√©dicos da Equipe:</label>
                    <div id="selecao-medicos" class="selecao-medicos">
                        <p class="carregando-info">Carregando m√©dicos dispon√≠veis...</p>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Salvar Equipe</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts restantes carregados depois do script de inicializa√ß√£o -->
    <script src="app-login.js"></script>
    <script src="app-pacientes.js"></script>
    <script src="app-diagnostico.js"></script>
    <script src="app-equipes.js"></script>
    <script src="app-admin.js"></script>
    
    <!-- Script de coordena√ß√£o de carregamento final -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Script de coordena√ß√£o final carregado");
            
            // Aguardar um momento para garantir que todos os scripts foram carregados
            setTimeout(function() {
                // Disparar evento de aplica√ß√£o inicializada
                console.log("Disparando evento app-ready");
                document.dispatchEvent(new CustomEvent('app-ready'));
                
                // Verificar se o usu√°rio j√° est√° autenticado para carregar o dashboard
                if (window.verificarFirebaseDisponivel() && window.auth && window.auth.currentUser) {
                    console.log("Usu√°rio j√° autenticado, carregando dashboard");
                    // Chamar fun√ß√£o de carregamento do dashboard
                    if (typeof carregarPacientes === 'function') {
                        setTimeout(() => carregarPacientes(), 500);
                    }
                } else {
                    console.log("Usu√°rio n√£o autenticado, aguardando login");
                }
            }, 500);
        });
    </script>

    <script>
        // Script inline para garantir que o menu toggle funcione independentemente dos m√≥dulos
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menu-toggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const closeSidebarBtn = document.getElementById('close-sidebar');
            
            if (menuToggle && sidebar && sidebarOverlay) {
                menuToggle.addEventListener('click', function() {
                    console.log('Menu toggle clicado (script inline)');
                    sidebar.style.left = '0';
                    sidebarOverlay.style.display = 'block';
                });
            }
            
            if (closeSidebarBtn && sidebar && sidebarOverlay) {
                closeSidebarBtn.addEventListener('click', function() {
                    sidebar.style.left = '-280px';
                    sidebarOverlay.style.display = 'none';
                });
            }
            
            if (sidebarOverlay && sidebar) {
                sidebarOverlay.addEventListener('click', function() {
                    sidebar.style.left = '-280px';
                    sidebarOverlay.style.display = 'none';
                });
            }
        });
    </script>

    <!-- Script para garantir que a se√ß√£o de administra√ß√£o exista -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const main = document.querySelector('main');
        // Verificar se a se√ß√£o de administra√ß√£o existe e criar se necess√°rio
        if (main && !document.getElementById('admin-section')) {
          console.log("Criando se√ß√£o de administra√ß√£o no DOM");
          const adminSection = document.createElement('section');
          adminSection.id = 'admin-section';
          adminSection.className = 'app-section admin-section';
          
          // Estrutura b√°sica do painel administrativo
          adminSection.innerHTML = `
            <div class="admin-container">
              <h2><i class="fas fa-user-shield"></i> Painel Administrativo</h2>
              
              <div class="admin-tabs">
                <button id="tab-dashboard" class="admin-tab active">Dashboard</button>
                <button id="tab-usuarios" class="admin-tab">Usu√°rios</button>
                <button id="tab-equipes" class="admin-tab">Equipes</button>
              </div>
              
              <div id="admin-dashboard-container" class="admin-tab-content active">
                <div class="admin-dashboard-stats">
                  <div class="stat-card">
                    <h3>Pacientes</h3>
                    <div class="stat-number" id="total-pacientes">0</div>
                  </div>
                  <div class="stat-card">
                    <h3>M√©dicos</h3>
                    <div class="stat-number" id="total-medicos">0</div>
                  </div>
                  <div class="stat-card">
                    <h3>Equipes</h3>
                    <div class="stat-number" id="total-equipes">0</div>
                  </div>
                  <div class="stat-card">
                    <h3>Evolu√ß√µes</h3>
                    <div class="stat-number" id="total-evolucoes">0</div>
                  </div>
                </div>
                
                <div class="admin-section-title">
                  <h3>Usu√°rios Pendentes de Aprova√ß√£o</h3>
                </div>
                
                <div class="admin-list" id="lista-usuarios-pendentes">
                  <div class="sem-registros">
                    <p>N√£o h√° usu√°rios pendentes de aprova√ß√£o.</p>
                  </div>
                </div>
              </div>
              
              <div id="admin-usuarios-container" class="admin-tab-content">
                <div class="admin-section-title">
                  <h3>Todos os Usu√°rios</h3>
                </div>
                
                <div class="admin-list" id="lista-todos-usuarios">
                  <div class="sem-registros">
                    <p>Carregando usu√°rios...</p>
                  </div>
                </div>
              </div>
              
              <div id="admin-equipes-container" class="admin-tab-content">
                <div class="admin-section-title">
                  <h3>Gerenciar Equipes</h3>
                  <button id="btn-nova-equipe" class="btn-outline">
                    <i class="fas fa-plus"></i> Nova Equipe
                  </button>
                </div>
                
                <div class="admin-list" id="lista-equipes">
                  <div class="sem-registros">
                    <p>Carregando equipes...</p>
                  </div>
                </div>
              </div>
            </div>
          `;
          
          main.appendChild(adminSection);
          console.log("Se√ß√£o de administra√ß√£o criada com sucesso");
        }
      });
    </script>
    
    <!-- Script de fixa√ß√£o de navega√ß√£o -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        console.log("Configurando navega√ß√£o manual...");
        
        // Bot√µes de navega√ß√£o
        const btnDashboard = document.getElementById('btn-dashboard');
        const btnAdicionarNovo = document.getElementById('btn-adicionar-novo');
        const btnConsultar = document.getElementById('btn-consultar');
        const btnAdmin = document.getElementById('btn-admin');
        
        // Se√ß√µes
        const dashboardSection = document.getElementById('dashboard-section');
        const adicionarPacienteSection = document.getElementById('adicionar-paciente-section');
        const consultarPacienteSection = document.getElementById('consultar-paciente-section');
        const adminSection = document.getElementById('admin-section');
        
        // Fun√ß√£o independente para alternar se√ß√µes
        function alternarSecao(secao, botao) {
          console.log("Alterando para se√ß√£o:", secao.id);
          
          // Esconder todas as se√ß√µes
          const todasSecoes = document.querySelectorAll('.app-section');
          todasSecoes.forEach(s => {
            s.style.display = 'none';
            s.classList.remove('active-section');
          });
          
          // Remover classe ativa de todos os bot√µes
          document.querySelectorAll('.menu-btn').forEach(b => {
            b.classList.remove('menu-btn-active');
          });
          
          // Mostrar a se√ß√£o selecionada
          secao.style.display = 'block';
          secao.classList.add('active-section');
          
          // Ativar o bot√£o selecionado
          if (botao) {
            botao.classList.add('menu-btn-active');
          }
          
          // Fechar o sidebar em dispositivos m√≥veis
          const sidebar = document.getElementById('sidebar');
          const sidebarOverlay = document.getElementById('sidebar-overlay');
          
          if (window.innerWidth <= 768 && sidebar && sidebarOverlay) {
            sidebar.style.left = '-280px';
            sidebarOverlay.style.display = 'none';
          }
        }
        
        // Adicionar eventos aos bot√µes
        if (btnDashboard && dashboardSection) {
          btnDashboard.addEventListener('click', function() {
            alternarSecao(dashboardSection, btnDashboard);
          });
        }
        
        if (btnAdicionarNovo && adicionarPacienteSection) {
          btnAdicionarNovo.addEventListener('click', function() {
            alternarSecao(adicionarPacienteSection, btnAdicionarNovo);
          });
        }
        
        if (btnConsultar && consultarPacienteSection) {
          btnConsultar.addEventListener('click', function() {
            alternarSecao(consultarPacienteSection, btnConsultar);
          });
        }
        
        if (btnAdmin && adminSection) {
          btnAdmin.addEventListener('click', function() {
            alternarSecao(adminSection, btnAdmin);
          });
        }
        
        console.log("Navega√ß√£o manual configurada");
      });
    </script>
</body>
</html> 